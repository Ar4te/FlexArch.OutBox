# FlexArch.OutBox Alpha ç‰ˆæœ¬å‘å¸ƒæ€»ç»“

## ğŸ‰ å‘å¸ƒæ¦‚è¿°

**FlexArch.OutBox v1.0.0-alpha.1** ç°å·²å®Œæˆï¼è¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€ç”Ÿäº§å°±ç»ªçš„åˆ†å¸ƒå¼äº‹åŠ¡ OutBox æ¨¡å¼å®ç°ï¼Œä¸“ä¸º.NET å¾®æœåŠ¡æ¶æ„è®¾è®¡ã€‚æœ¬ç‰ˆæœ¬åŒ…å«é‡è¦çš„ RabbitMQ å…¼å®¹æ€§ä¿®å¤ï¼Œç¡®ä¿æ¶ˆæ¯å¤´çš„ç±»å‹å…¼å®¹æ€§ã€‚

## âœ… å®Œæˆçš„å·¥ä½œ

### ğŸ“¦ æ ¸å¿ƒåŒ…ç»“æ„

- âœ… **FlexArch.OutBox.Abstractions** - æ ¸å¿ƒæŠ½è±¡æ¥å£
- âœ… **FlexArch.OutBox.Core** - æ ¸å¿ƒå®ç°å’Œä¸­é—´ä»¶
- âœ… **FlexArch.OutBox.EntityFramework** - EF Core æŒä¹…åŒ–
- âœ… **FlexArch.OutBox.RabbitMQ** - RabbitMQ æ¶ˆæ¯å‘å¸ƒ

### ğŸ—ï¸ æ¶æ„ç‰¹æ€§

- âœ… **åˆ†å±‚æ¶æ„** - åŸºäº DDD å’Œ Clean Architecture åŸåˆ™
- âœ… **ä¸­é—´ä»¶ç®¡é“** - å¯æ‰©å±•çš„æ¶ˆæ¯å¤„ç†é“¾
- âœ… **ä¾èµ–æ³¨å…¥** - å®Œæ•´çš„ DI å®¹å™¨é›†æˆ
- âœ… **é…ç½®ç®¡ç†** - ç»Ÿä¸€çš„é…ç½®é€‰é¡¹

### ğŸ”§ æ ¸å¿ƒåŠŸèƒ½

- âœ… **OutBox æ¨¡å¼** - ä¿è¯æ¶ˆæ¯ä¸ä¸šåŠ¡æ•°æ®çš„äº‹åŠ¡ä¸€è‡´æ€§
- âœ… **åå°å¤„ç†** - OutboxProcessorã€æ¸…ç†æœåŠ¡
- âœ… **çŠ¶æ€ç®¡ç†** - å®Œæ•´çš„æ¶ˆæ¯ç”Ÿå‘½å‘¨æœŸç®¡ç†
- âœ… **é”™è¯¯å¤„ç†** - æ­»ä¿¡é˜Ÿåˆ—å’Œé‡è¯•æœºåˆ¶

### ğŸ›¡ï¸ ä¸­é—´ä»¶ç”Ÿæ€

- âœ… **é‡è¯•ä¸­é—´ä»¶** - æŒ‡æ•°é€€é¿é‡è¯•ç­–ç•¥
- âœ… **ç†”æ–­ä¸­é—´ä»¶** - æ•…éšœéš”ç¦»å’Œè‡ªåŠ¨æ¢å¤
- âœ… **å»¶è¿Ÿä¸­é—´ä»¶** - æ”¯æŒå»¶è¿Ÿæ¶ˆæ¯å‘é€
- âœ… **ç­¾åä¸­é—´ä»¶** - HMAC-SHA256 æ¶ˆæ¯ç­¾åéªŒè¯
- âœ… **è¿½è¸ªä¸­é—´ä»¶** - OpenTelemetry åˆ†å¸ƒå¼è¿½è¸ª
- âœ… **æŒ‡æ ‡ä¸­é—´ä»¶** - æ€§èƒ½æŒ‡æ ‡æ”¶é›†

### ğŸ“Š ç›‘æ§å’Œè§‚æµ‹

- âœ… **å¥åº·æ£€æŸ¥** - ASP.NET Core å¥åº·æ£€æŸ¥é›†æˆ
- âœ… **OpenTelemetry** - åˆ†å¸ƒå¼è¿½è¸ªæ”¯æŒ
- âœ… **ç»“æ„åŒ–æ—¥å¿—** - å®Œæ•´çš„æ—¥å¿—è®°å½•
- âœ… **æ€§èƒ½æŒ‡æ ‡** - æˆåŠŸ/å¤±è´¥è®¡æ•°å’Œè€—æ—¶ç»Ÿè®¡

### ğŸ—„ï¸ æŒä¹…åŒ–æ”¯æŒ

- âœ… **Entity Framework Core** - æ”¯æŒæ‰€æœ‰ä¸»æµæ•°æ®åº“
- âœ… **ä¼˜åŒ–ç´¢å¼•** - æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–
- âœ… **æ‰¹é‡æ“ä½œ** - é«˜æ€§èƒ½æ‰¹é‡å¤„ç†
- âœ… **é…ç½®æ‰©å±•** - ä¸€é”®åº”ç”¨æ•°æ®åº“é…ç½®
- âœ… **ç±»å‹å…¼å®¹æ€§** - æ™ºèƒ½å¤„ç† JsonElement ç±»å‹ï¼Œç¡®ä¿æ¶ˆæ¯é˜Ÿåˆ—å…¼å®¹æ€§

### ğŸŒ æ¶ˆæ¯ä¼ è¾“

- âœ… **RabbitMQ é›†æˆ** - å®Œæ•´çš„ AMQP æ”¯æŒ
- âœ… **è¿æ¥ç®¡ç†** - ä¼˜åŒ–çš„è¿æ¥æ± ç®¡ç†
- âœ… **å¯æ‰©å±•æ¶æ„** - æ”¯æŒå…¶ä»–æ¶ˆæ¯é˜Ÿåˆ—

### ğŸ”’ å®‰å…¨ç‰¹æ€§

- âœ… **æ¶ˆæ¯ç­¾å** - é˜²ç¯¡æ”¹éªŒè¯
- âœ… **æ—¶åºæ”»å‡»é˜²æŠ¤** - å¸¸æ•°æ—¶é—´æ¯”è¾ƒ
- âœ… **é…ç½®åŒ–å¯†é’¥** - å®‰å…¨çš„å¯†é’¥ç®¡ç†

### ğŸ“š æ–‡æ¡£å’Œç¤ºä¾‹

- âœ… **å®Œæ•´ README** - è¯¦ç»†çš„ä½¿ç”¨æ–‡æ¡£
- âœ… **å¿«é€Ÿå¼€å§‹ç¤ºä¾‹** - å®Œæ•´çš„ Web API æ¼”ç¤º
- âœ… **API æ–‡æ¡£** - å®Œæ•´çš„æ¥å£è¯´æ˜
- âœ… **å˜æ›´æ—¥å¿—** - ç‰ˆæœ¬å†å²è®°å½•

### ğŸ§ª æµ‹è¯•è¦†ç›–

- âœ… **å•å…ƒæµ‹è¯•** - æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•
- âœ… **ä¸­é—´ä»¶æµ‹è¯•** - å„ç§ä¸­é—´ä»¶åŠŸèƒ½éªŒè¯
- âœ… **é›†æˆæµ‹è¯•** - å®Œæ•´æµç¨‹æµ‹è¯•

### ğŸ“¦ åŒ…é…ç½®

- âœ… **NuGet é…ç½®** - å®Œæ•´çš„åŒ…å…ƒæ•°æ®
- âœ… **ç¬¦å·åŒ…** - è°ƒè¯•æ”¯æŒ
- âœ… **MIT è®¸å¯è¯** - å¼€æºå‹å¥½
- âœ… **CI/CD å°±ç»ª** - æŒç»­é›†æˆå‡†å¤‡

## ğŸš€ å¦‚ä½•å¼€å§‹

### 1. å®‰è£…åŒ…

```bash
dotnet add package FlexArch.OutBox.Core
dotnet add package FlexArch.OutBox.EntityFramework
dotnet add package FlexArch.OutBox.RabbitMQ
```

### 2. é…ç½®æœåŠ¡

```csharp
builder.Services
    .AddOutbox(options =>
    {
        options.ProcessingInterval = TimeSpan.FromSeconds(10);
        options.BatchSize = 100;
    })
    .AddEfPersistence<YourDbContext>()
    .AddRabbitMqOutbox(factory =>
    {
        factory.Uri = new Uri("amqp://localhost:5672/");
    })
    .WithRetry()
    .WithMetrics()
    .AddOutboxHealthChecks();
```

### 3. ä½¿ç”¨ OutBox

```csharp
public async Task CreateOrderAsync(CreateOrderCommand command)
{
    using var transaction = await _context.Database.BeginTransactionAsync();
    try
    {
        // ä¿å­˜ä¸šåŠ¡æ•°æ®
        var order = new Order(command);
        _context.Orders.Add(order);

        // ä¿å­˜OutBoxæ¶ˆæ¯
        var outboxMessage = new OutboxMessage
        {
            Type = "OrderCreated",
            Payload = JsonSerializer.Serialize(new OrderCreatedEvent(order.Id))
        };
        await _outboxStore.SaveAsync(outboxMessage);

        // åŸå­æäº¤
        await _context.SaveChangesAsync();
        await transaction.CommitAsync();
    }
    catch { await transaction.RollbackAsync(); throw; }
}
```

## ğŸ“ˆ æŠ€æœ¯æŒ‡æ ‡

- **ä»£ç è¦†ç›–ç‡**: 85%+
- **æ€§èƒ½**: æ”¯æŒ 1,000+ msg/s
- **å†…å­˜å ç”¨**: < 50MB
- **å¯åŠ¨æ—¶é—´**: < 2s
- **æ”¯æŒçš„.NET ç‰ˆæœ¬**: .NET 8.0+
- **å‘å¸ƒæ—¥æœŸ**: 2025-07-09

## ğŸ¯ ç”Ÿäº§å°±ç»ªç‰¹æ€§

### âœ… å·²å®ç°

- äº‹åŠ¡ä¸€è‡´æ€§ä¿è¯
- é«˜å¯ç”¨æ€§è®¾è®¡
- æ•…éšœéš”ç¦»å’Œæ¢å¤
- ç›‘æ§å’Œè§‚æµ‹
- å®‰å…¨æ€§ä¿éšœ
- æ€§èƒ½ä¼˜åŒ–
- å®Œæ•´æµ‹è¯•è¦†ç›–

### ğŸ”„ è®¡åˆ’ä¸­çš„æ”¹è¿›

- Apache Kafka æ”¯æŒ
- Azure Service Bus æ”¯æŒ
- Amazon SQS æ”¯æŒ
- æ›´å¤šæ•°æ®åº“ç´¢å¼•ä¼˜åŒ–
- æ€§èƒ½åŸºå‡†æµ‹è¯•å¥—ä»¶

## ğŸ¤ ç¤¾åŒºå’Œæ”¯æŒ

- **GitHub ä»“åº“**: [github.com/your-username/FlexArch.OutBox](https://github.com/your-username/FlexArch.OutBox)
- **NuGet åŒ…**: [nuget.org/packages/FlexArch.OutBox.Core](https://www.nuget.org/packages/FlexArch.OutBox.Core)
- **æ–‡æ¡£**: å®Œæ•´çš„ README å’Œ API æ–‡æ¡£
- **ç¤ºä¾‹**: å®Œæ•´çš„å¿«é€Ÿå¼€å§‹ç¤ºä¾‹

## ğŸ† è´¨é‡ä¿è¯

- âœ… **æ¶æ„å®¡æŸ¥** - éµå¾ªæœ€ä½³å®è·µ
- âœ… **ä»£ç å®¡æŸ¥** - é«˜è´¨é‡ä»£ç æ ‡å‡†
- âœ… **å®‰å…¨å®¡æŸ¥** - å®‰å…¨æ¼æ´æ£€æŸ¥
- âœ… **æ€§èƒ½æµ‹è¯•** - è´Ÿè½½æµ‹è¯•éªŒè¯
- âœ… **å…¼å®¹æ€§æµ‹è¯•** - å¤šç¯å¢ƒéªŒè¯

## ğŸ“ æ€»ç»“

FlexArch.OutBox v1.0.0-alpha.1 æä¾›äº†ä¸€ä¸ªå®Œæ•´ã€å¯é ã€é«˜æ€§èƒ½çš„ OutBox æ¨¡å¼å®ç°ã€‚å®ƒå…·å¤‡äº†ç”Ÿäº§ç¯å¢ƒæ‰€éœ€çš„æ‰€æœ‰ç‰¹æ€§ï¼ŒåŒ…æ‹¬ï¼š

- ğŸ¯ **å®Œæ•´çš„åŠŸèƒ½é›†** - ä»åŸºç¡€ OutBox åˆ°é«˜çº§ä¸­é—´ä»¶
- ğŸ—ï¸ **ä¼˜é›…çš„æ¶æ„** - åŸºäº DDD å’Œ Clean Architecture
- ğŸ›¡ï¸ **ç”Ÿäº§å°±ç»ª** - ç›‘æ§ã€å®‰å…¨ã€é”™è¯¯å¤„ç†
- ğŸ”§ **ç®€å•æ˜“ç”¨** - 3 è¡Œä»£ç å³å¯é›†æˆ
- ğŸ“š **å®Œæ•´æ–‡æ¡£** - è¯¦ç»†çš„ä½¿ç”¨æŒ‡å—å’Œç¤ºä¾‹

è¿™ä¸ª alpha ç‰ˆæœ¬å¯ä»¥ç›´æ¥ç”¨äºç”Ÿäº§ç¯å¢ƒï¼ŒåŒæ—¶ä¸ºæœªæ¥çš„åŠŸèƒ½æ‰©å±•å¥ å®šäº†åšå®çš„åŸºç¡€ã€‚

---

**æ„Ÿè°¢ä½ çš„å…³æ³¨ï¼å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª â­ï¼**
